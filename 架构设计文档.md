# 架构设计文档

## 总体架构

本项目旨在开发一款基于GitHub数据的开发者评估应用，评估开发者的技术能力、领域以及所在的国家。该应用将通过分析GitHub的开源项目数据和开发者的贡献度来为开发者赋予TalentRank，并且根据开发者的关系网络推测其国家信息。通过这些评估信息，用户可以查询并比较不同开发者的技术能力。应用还将利用AI技术进一步整理和推测开发者的信息，提升评估的准确性和智能化。

![image-20241108013234302](../images/image-20241108013234302.png)

## 前端架构

本项目的前端架构基于 **React** 与 **TypeScript** 作为核心技术栈，搭配 **Ant Design** UI
组件库，构建了一个模块化、可扩展、体验流畅的单页面应用（SPA）。通过引入 Redux 管理状态，并使用 React Router
实现路由跳转，前端架构充分展示了在性能优化、用户体验和代码组织方面的深度思考与细致打磨。

1. **技术选型与架构设计**

项目选择了 React + TypeScript 的技术组合，以保障代码的类型安全性和开发过程中的灵活性。使用 CRA (Create React App)
快速构建应用基础，结合 **Webpack** 定制生产环境与开发环境的配置，有效提升了构建效率与代码优化水平。同时，通过模块化设计实现了代码的高内聚性和逻辑分离，为功能拓展和维护打下了坚实的基础。

2. **全局状态管理**

采用 Redux 管理全局状态，确保了组件间状态共享的高效性与一致性。特别是在项目中封装了多个 Redux
状态模块，从而实现了业务逻辑与状态管理的清晰分离，使得代码的可读性和可维护性显著提升。Redux 中的复杂逻辑处理也被精细封装，保障了多状态组件的高效渲染。

3. **UI 组件与样式管理**

项目基于 Ant Design (AntD) 组件库构建页面，充分发挥其丰富的开源组件优势，确保了界面的一致性和开发效率。使用 **SASS**
进行样式预编译，带来了强大的变量、混入、嵌套选择器等特性，使得样式的模块化管理更为高效。团队还基于项目需求自定义了一系列高可复用性组件，从而灵活满足不同场景的视觉设计需求，既提升了开发效率又强化了应用的视觉辨识度。

4. **用户体验优化**

用户体验是本项目的核心关注点之一。我们在多个交互节点上引入了 **Lottie 动画**，结合 CSS
动效，在数据加载、页面切换等操作中为用户提供了细腻而直观的反馈，使应用操作更具沉浸感。同时，使用 **ECharts**
完成开发者评估报告的可视化图表展示，基于数据的动态呈现让用户能够清晰、直观地浏览和分析开发者的技术能力，显著提升了用户的操作体验。

5. **高效的前后端交互与数据处理**

使用 Axios 作为 HTTP 请求库，前后端接口调用及数据处理流程得到有效优化。前端封装了请求和响应拦截器，使 API
调用在出错时能够进行快速响应和用户友好提示。此外，为了满足前后端分离开发的需求，前端在本地开发阶段使用 APIFox 模拟 API
数据，为接口联调提供了便捷支持，实现了前后端无缝对接。API 调用过程中还进行了去重处理和数据缓存，确保数据的稳定性与一致性。

6. **主题切换与个性化设置**

为满足用户多样化的使用需求，我们实现了全局主题切换功能，用户可一键切换深色与浅色模式。主题切换不仅仅是视觉层面的改变，我们对全局样式进行了精细化调整，确保在不同主题下都有一致的体验。此外，用户的主题偏好会被自动存储在浏览器中，以实现持久化记忆功能。项目还自定义了全局骨架屏动画样式，使得页面加载过程更为流畅，极大地优化了用户在网络较慢时的等待体验。

![](../images/前端架构图.png)

## 后端架构

![image-20241108013206319](../images/image-20241108013206319.png)

#### 技术栈

本项目采用以下技术栈：

- **Spring Boot**：作为主要的应用开发框架，提供便捷的开发支持。
- **Spring Cloud**：为微服务架构提供基础设施支持，处理服务注册与发现、配置管理等。
- **Spring Cloud Gateway**：作为网关，处理所有外部请求的转发、路由和安全控制。
- **Zookeeper**：用于服务注册与发现，保证微服务的高可用性和负载均衡。
- **OpenFeign**：用于服务间的远程调用，简化HTTP请求的实现。
- **Resilience4j**：实现服务的容错处理，支持熔断、重试、限流等功能。
- **Spring AI**：结合AI技术进行开发者信息的整理和自动化评估。
- **Mybatis**：ORM框架，用于数据库操作，简化持久化层的开发。
- **MySQL**：存储开发者的评估数据、GitHub项目数据等。
- **Milvus**：向量数据库，存储和检索开发者信息的向量数据，用于相似性搜索和数据匹配。
- **Redis**：缓存数据库，优化高频查询的性能。
- **Redisson**：基于Redis实现分布式锁、分布式集合等高级特性。
- **RabbitMQ**：消息队列，处理微服务间的异步通信。
- **Quartz**：定时任务框架，用于定期更新GitHub开发者数据。

#### 系统架构

本系统采用微服务架构设计，主要分为以下模块：

1. **yunying-ai（AI模块）**：负责AI部分的功能，调用智普API进行数据分析与推测。主要功能包括自动整理开发者的技术能力评估信息、推测开发者的领域等。
2. **yunying-gh（GitHub数据模块）**：负责获取GitHub上开发者的公开数据，包括项目、贡献度等。定期拉取GitHub的API进行数据同步，并存储在MySQL数据库中。
3. **yunying-gateway（网关模块）**：作为所有外部请求的入口，统一进行请求转发和路由控制。通过API网关实现跨服务的负载均衡、安全控制等。
4. **yunying-quartz（定时任务模块）**：负责定期更新GitHub的开发者数据，包括刷新开发者的贡献度、项目的排名等信息。该模块利用Quartz实现定时任务调度。
5. **yunying-server（主模块）**：作为核心模块，处理与前端的交互，提供开发者评估结果、领域筛选、技术能力排行等API。此模块会调用其他微服务提供的功能，并将结果返回给前端。

## 算法模块

### TalentRank 算法

**TalentRank** 是我们为评估 GitHub 开发者技术能力而设计的核心算法。其灵感来源于 Google 的 PageRank
算法，但我们在此基础上进行了深度优化，使其更适用于开发者在开源项目中的贡献度评估。TalentRank
不仅考虑了开发者在各项目中的直接贡献，还结合了项目的影响力、技术难度、贡献间的协同效应等多层面因素，从而为用户提供更科学、全面的开发者技术能力评分。

**1. 多层级项目权重评估**

TalentRank 首先将项目分为多个层级，以此衡量项目在 GitHub 社区中的重要程度。项目层级的设定主要依据以下几方面：

- **项目受欢迎度**：通过项目的 Star 数、Fork 数、关注者数量等反映项目的受欢迎程度。

- **贡献影响力**：项目的主要贡献者及其在 GitHub 社区中的影响力（如关注者数量和以往贡献历史）。

- **项目技术难度**：综合分析项目的编程语言、代码复杂度等技术指标，将技术难度高的项目赋予更高权重。

通过这层项目权重评估，我们能够客观区分不同项目对开发者评分的影响，确保开发者的评分能够匹配其实际的技术能力。

**2. 开发者贡献度量化**

对于每个项目，我们进一步量化开发者在该项目中的贡献度。我们设计了一个“贡献因子”计算公式，主要由以下三项构成：

- **代码提交数量**：考察开发者在项目中代码提交的频率和总量。频繁的高质量提交不仅代表着开发者的活跃度，也反映其对项目的核心贡献度。

- **代码合并及评论**：记录开发者的 Pull Request 被合并次数以及其他团队成员的评论反馈情况。通过加权 Pull Request
  的合并次数和对其他开发者代码的评价行为，我们能更精确评估开发者在项目中的核心角色。

- **开发者角色及权限**：若开发者在项目中拥有管理权限（如 Maintainer、Contributor），其贡献度的基础权重将会有所提升，因其所承担的责任相对较高。

这一层的设计确保了 TalentRank 能从多角度精准量化开发者的贡献，使得最终评分更为客观。

**3. 协同效应与加权评分**

在多个开发者共同贡献的项目中，TalentRank 通过协同效应因子来加权贡献。具体来说：

- **团队协作评分**：若开发者在项目中与其他高评分开发者协作，算法将其贡献度乘以协作因子，反映协同贡献的实际价值。

- **关键贡献节点**：通过分析项目的关键时间节点（如重大更新、版本发布），判断开发者在关键节点的参与度。若开发者在关键节点参与了核心代码贡献，则该部分贡献权重将显著提升。

这种协同效应加权机制能够在大型项目中有效平衡开发者的个人贡献和团队协作贡献，使得评分更加公正。

**4. 动态迭代与调整机制**

TalentRank 的另一个核心创新在于动态迭代与调整机制。算法会定期根据 GitHub 上最新的开源项目数据进行重新评估，自动更新开发者的技术能力评分：

- **反馈回路**：通过不断积累项目评分历史数据，算法能够根据实际结果和评分的匹配度进行反馈和微调。这样可以使评分更贴合开发者的真实技术水平。

- **自适应权重调整**：算法会动态调整不同项目类型的权重，以适应技术发展的新趋势。例如，在人工智能、区块链等热门技术领域的项目中，算法会根据新技术的特点适当提高评分权重，从而跟随技术进步。

通过这一动态迭代机制，TalentRank 能够保持评分的时效性和准确性，使用户在不断变化的技术环境中也能获得可信赖的开发者技术能力评分。

**总结**

TalentRank 算法集成了多层级项目权重评估、贡献度量化、协同效应加权和动态调整机制，为用户提供了高度综合、精确的开发者技术能力评价。相比传统的评分方法，TalentRank
能够在复杂的 GitHub 社区数据中挖掘出开发者的真实实力，让用户更全面地了解每位开发者的技术水平与价值。

### 标签传播算法

**标签传播算法** 是我们为推测 GitHub
开发者国籍而设计的算法。标签传播算法（LPA）是一种无监督的图算法，通常用于节点分类或标签推测。其基本思想是通过节点之间的关系传递标签信息，直到网络中的标签稳定下来。在推测国籍时，标签传播算法可以通过分析开发者在开源项目中的合作关系等信息，逐步推测出开发者的可能国籍。  
**1. 构建社交网络图**

- **构建网络**：每个开发者为一个节点，开发者之间的合作关系,共同参与的项目为边，构建社交网络图。
- **明确节点**：若某个开发者在其 GitHub Profile 中明确标明国籍（如美国、印度、德国等），则该开发者的节点被赋予相应的国籍标签。

**2. 标签传播过程**

- **初始化标签**：开发者的国籍标签由已知的节点（那些明确标注了国籍的开发者）提供。例如，若某个开发者标注为“美国”，该节点就会被赋予“USA”标签。
- **标签传播**：通过算法传播已知标签给邻接节点（即该开发者合作过的其他开发者）。标签传播是通过考虑节点间的连接强度（合作频次、贡献度等）进行的。节点在传播过程中会逐渐获取邻接节点的标签信息。
- **迭代过程**：标签会通过社交网络传播多轮，直到节点的标签趋于稳定或达到设定的停止条件。每个节点的最终标签即为推测出的国籍。

**3. 置信度计算**

- **邻居节点的标签一致性**：若开发者与多个其他开发者共享相同的国籍标签，则该标签的置信度较高。
- **合作强度**：如果开发者与其他标签已知的开发者有较强的合作关系（如频繁的代码提交、Pull Request 合并等），那么该开发者的国籍推测置信度会更高。
- **社交网络拓扑结构**：通过开发者的社交网络拓扑结构分析，某些节点可能处于网络的“中心”，它们的标签传播到周围节点时，能够提高传播的准确性。
- **标签传播稳定性**：如果某个开发者的标签在多轮传播后仍保持稳定，说明标签推测的置信度较高。

**总结**

标签传播算法（LPA）推测开发者的国籍，不仅能够在缺乏明确信息的情况下填补空白，还能够根据开发者的社交网络、项目参与度、技术栈等特征推测其最可能的国籍。置信度机制能够为每个推测结果提供一个可靠度评分，帮助用户区分高置信度和低置信度的国籍推测结果，从而提高决策的准确性。

### 与智普 AI 结合

**智普 AI** 我们能够自动整理和分析这些信息，提供一个全面的技术能力评估，并自动生成 AI 整理结果。

**1. 多维度信息整合**

- **GitHub 个人资料**：开发者的 GitHub 个人介绍、项目描述、以及个人网站链接等信息将被 AI 提取，形成更加丰富的背景资料，进一步完善技术能力评估。
- **个人博客与网站**：如果开发者在 GitHub 上提供了博客链接或个人网站，AI
  会自动访问并分析这些外部资源，评估开发者在技术领域的深度与广度。博客内容、文章质量、更新频率等都会作为评估依据，帮助展示开发者的技术影响力和知识输出。
- **GitHub 贡献信息**：基于开发者的 GitHub 数据（如提交记录、项目参与度、代码质量、社区活动等），我们可以评估开发者的技术能力和活跃度。

**2. AI 自动化分析与总结**

- **自然语言处理（NLP）**：AI 使用先进的自然语言处理技术分析博客、个人网站及 GitHub 个人资料中的文字内容。通过提取关键字、技术领域、项目经验、解决方案等信息，AI
  自动整理出开发者的技术特点、专长领域、重要贡献等总结。
- **知识图谱构建**：AI 能够将开发者的技术能力与其贡献的开源项目、参与的社区活动、个人的技术文章等相关数据进行关联，形成一个全面的知识图谱。通过知识图谱，AI
  能够智能化评估开发者的综合能力。

**3. 自动化报告生成**

- **技术能力评估报告**：AI 会自动整理出开发者的 技术能力报告，报告中不仅包含开发者在 GitHub
  的贡献情况，还会根据其个人博客、文章、项目描述等内容，自动生成相关的评估维度。

- **动态更新与精确度**：随着开发者在 GitHub 上的新活动和外部博客/网站的更新，AI 会实时更新其评估结果，确保开发者信息的准确性和时效性。AI
  通过持续学习和优化，能够提供更准确、更符合开发者当前技术水平的评估。

**总结**
通过基于智普 AI 的自动整理和评估，开发者的技术能力可以更全面、更准确地被分析和呈现。AI 不仅从开发者的 GitHub
数据出发，还结合了外部的博客、个人网站、以及其他社交平台的信息，提供多维度的能力评估。同时，基于置信度展示和自动更新机制，确保评估结果的可靠性和时效性。AI
技术的引入，使得开发者的技术能力评估更加智能化、透明化，并能够为开发者提供更个性化的建议与成长路径。

## 功能模块

### Home 首页

- **产品介绍与欢迎动画**：在 Home 页，用户首先会看到一系列动态的 CSS 和 Lottie 动画，包括欢迎页面的加载动画和浮动效果。这些动画通过
  React 、 Ant Design 、Lottie 组件、CSS 配合实现，为用户带来沉浸式的欢迎体验，引导用户浏览页面的主要功能。

![](../images/home01.png)

![](../images/home02.png)

- **开发者评估报告查询**：用户可以在搜索框中输入 GitHub 开发者的 login 值来查询开发者的评估报告。该功能通过 Axios 发送
  http 请求后端接口，查询并展示数据库中已有的评估报告。

![](../images/home03.png)

- **添加开发者功能**：用户可以通过输入 GitHub login 来添加新的开发者信息。系统会调用后端接口，利用算法模块分析该开发者的
  GitHub 公开数据，生成评估报告，并将数据保存到数据库中进行排名。后端同时处理数据的去重和优化，确保每次添加操作高效、准确。用户在等待过程中会有相关动画提示，提升了产品用户体验度。

![](../images/home04.png)

![](../images/home05.png)

- **主题换肤**：该项目所有页面均实现主题换肤功能。前端自定义封装了换肤按钮组件，为用户提供了深色模式和浅色模式两种 UI
  风格，满足不同用户的需求。同时浏览器会“记忆”用户的使用偏好，方便用户下次使用。

### TalentRank 开发者排行榜页面

- **多维度开发者排名展示**：开发者排名页面展示了多维度算法排序的结果，用户可以清晰看到各开发者的综合评分。排行榜使用了自定义的开发者卡片样式，通过
  Lottie 动画和 Grid 布局优化显示效果，实现响应式 web 网页。卡片样式中包括开发者头像、排名、国籍图标等关键信息，以确保用户在视觉上快速获取信息。

![](../images/talentrank01.png)

![](../images/talentrank02.png)

- **条件筛选功能（领域与国籍筛选**
  ）：用户可以根据开发者的技术领域（如前端、后端、区块链等）和国籍进行筛选。筛选条件采用组合方式，用户可以自由搭配，实时查看不同开发者的排名表现。未填写国籍的开发者会通过算法自动填充国籍，增强数据的完整性，并展示推测的置信度供用户参考。

![](../images/talentrank03.png)

![](../images/talentrank04.png)

- **触底刷新与分页加载**：页面实现了触底刷新功能，当用户滚动到底部时会自动加载更多数据。这一分页加载功能由 React 实现，通过
  useRef 监控滚动位置，结合 Axios 向后端请求新数据，确保大规模数据展示时的流畅加载体验。分页加载减少了页面初次加载的等待时间，同时骨架屏和加载动画提升了用户的等待体验。

### Developer 开发者主页页面

- **开发者基础信息展示**：开发者主页提供了开发者的基础信息展示，包括头像、用户名、个人简介、国籍、关注数、个人博客等。在实现上，数据通过
  Axios 从后端获取，前端使用 Ant Design 组件和自定义样式进行排版，以确保信息清晰、简洁地呈现在用户面前。

- **技术能力可视化展示**：使用 ECharts 实现开发者技术能力的可视化图表展示，涵盖了如代码提交数量、仓库数量、使用语言等核心指标。ECharts
  提供的高度定制化能力允许展示多种图表类型，从而让用户能够直观地看到开发者的技术能力和活跃情况。

- **开发者贡献项目展示**：页面提供了一个开发者贡献项目列表，展示该开发者在 GitHub
  上参与的主要项目。列表中包含每个项目的名称、描述、贡献度等关键信息，用户可以清晰了解开发者的项目参与度和技术能力。每个项目项都带有一个链接，用户点击后可直接跳转至
  GitHub 对应的项目仓库，为用户进一步探索提供便利。列表的样式使用了自定义的卡片布局，并在每个项目项上加以动画效果，提升用户体验。

- **AI 报告生成**：页面集成了 LLM（大语言模型）支持，通过爬取 GitHub
  公开信息（如博客链接、项目自述文件等），生成开发者的技术评估报告。这一功能为开发者的个人页面增加了丰富的内容，AI 报告将根据
  GitHub 活跃度、项目影响力等维度，智能生成评估文字，使得开发者的技术水平展示更为详尽。

## 分工

- **樊波涛**：负责后端分布式集群搭建，系统架构设计，后端各个模块的实现，服务容器的编排

- **郝秋吉**：负责首页、开发者排行榜页面,撰写架构设计文档,解决前端页面 bug

- **许娜娜**：负责开发者主页页面,Talentrank、标签预测算法
