<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunying.server.mapper.DeveloperMapper">

    <select id="selectByField" resultType="com.yunying.server.domain.Developer">
        SELECT d.* FROM developer d
                            JOIN contribution c ON d.dev_id = c.dev_id
        WHERE c.field = #{field}
        ORDER BY d.talent_rank;
    </select>
    <select id="selectByNation" resultType="com.yunying.server.domain.Developer">
        SELECT d.* FROM developer d
                            JOIN contribution c ON d.dev_id = c.dev_id
        WHERE d.nation = #{nation}
        ORDER BY d.talent_rank;
    </select>
    <select id="selectByFieldAndNation" resultType="com.yunying.server.domain.Developer">
        SELECT d.* FROM developer d
                            JOIN contribution c ON d.dev_id = c.dev_id
        WHERE d.nation = #{nation} AND c.field = #{field}
        ORDER BY d.talent_rank;
    </select>
    <select id="selectByPage" resultType="com.yunying.server.domain.Developer">
        SELECT d.* FROM developer d
                            JOIN contribution c ON d.dev_id = c.dev_id
        ORDER BY d.talent_rank
        LIMIT #{limit} OFFSET #{offset};
    </select>
</mapper>
